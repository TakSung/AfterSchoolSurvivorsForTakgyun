# Task ID: 14
# Title: CoordinateManager 전역 관리자 구현
# Status: done
# Dependencies: 13
# Priority: high
# Description: 좌표 변환 시스템을 전역적으로 관리하고 런타임에 변환 구현체를 교체할 수 있는 CoordinateManager를 구현한다.
# Details:
CoordinateManager 클래스를 구현하여 ICoordinateTransformer 인스턴스를 관리한다. set_transformer() 메서드로 런타임에 좌표 변환 구현체를 교체할 수 있도록 하고, 옵저버 패턴을 적용하여 변환기 변경 시 관련 시스템들에게 알림을 보낸다. 전역 싱글톤으로 관리하되 테스트를 위한 의존성 주입도 지원한다. world_to_screen, screen_to_world 래퍼 메서드를 제공한다.

# Test Strategy:
좌표 변환기 교체 동작을 테스트하고, 옵저버 패턴 알림 기능을 검증한다. 싱글톤 동작과 스레드 안전성을 테스트하며, 다양한 변환기 구현체와의 호환성을 확인한다.

# Subtasks:
## 1. CoordinateManager 싱글톤 패턴 구현 [done]
### Dependencies: None
### Description: 스레드 안전한 싱글톤 패턴으로 CoordinateManager 클래스를 구현하고, ICoordinateTransformer 인스턴스 관리 기능을 추가한다.
### Details:
CoordinateManager 클래스에 싱글톤 패턴을 적용하여 전역 인스턴스 관리를 구현한다. _instance 클래스 변수와 threading.Lock을 사용하여 스레드 안전성을 보장한다. get_instance() 클래스 메서드로 싱글톤 인스턴스에 접근하고, _transformer 필드로 현재 좌표 변환기를 저장한다. 테스트를 위한 의존성 주입을 위해 set_instance() 메서드도 제공한다. world_to_screen, screen_to_world 래퍼 메서드를 구현하여 내부 변환기에 위임한다.

## 2. 런타임 변환기 교체 시스템 구현 [done]
### Dependencies: 14.1
### Description: set_transformer() 메서드를 구현하여 런타임에 ICoordinateTransformer 구현체를 안전하게 교체할 수 있는 시스템을 구현한다.
### Details:
set_transformer(transformer: ICoordinateTransformer) 메서드를 구현하여 현재 좌표 변환기를 교체한다. 변환기 교체 시 캐시 무효화 처리를 수행하고, 유효성 검사를 통해 올바른 ICoordinateTransformer 인터페이스 구현체인지 확인한다. get_transformer() 메서드로 현재 변환기 접근을 제공하며, 변환기가 설정되지 않은 경우 기본값으로 CameraBasedTransformer를 사용한다. 변환기 교체 과정에서 스레드 안전성을 보장한다.

## 3. 옵저버 패턴 기반 알림 메커니즘 구현 [done]
### Dependencies: 14.2
### Description: 변환기 변경 시 관련 시스템들에게 알림을 보내는 옵저버 패턴을 구현하고, CameraComponent와 MapRenderSystem 등의 좌표 의존 시스템과 연동한다.
### Details:
ICoordinateObserver 인터페이스를 정의하고 on_transformer_changed() 메서드를 포함한다. CoordinateManager에 _observers 리스트를 추가하고, add_observer(), remove_observer() 메서드를 구현한다. set_transformer() 호출 시 모든 등록된 옵저버에게 notify_observers()를 통해 변경 사항을 알린다. CameraSystem과 MapRenderSystem이 옵저버로 등록하여 좌표 변환기 변경에 대응할 수 있도록 한다. 옵저버 알림 시 예외 처리를 포함하여 한 옵저버의 오류가 다른 옵저버에 영향을 주지 않도록 한다.

